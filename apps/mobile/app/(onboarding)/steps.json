{
  "schemaVersion": "1.0.0",
  "locale": "en",
  "tone": {
    "style": "modern",
    "islamic": "respectful",
    "notes": [
      "Avoid slang that feels irreverent.",
      "Keep encouragement gentle, non-judgmental, and motivating."
    ]
  },
  "meta": {
    "flowId": "onboarding_v1",
    "appNamePlaceholder": "{{APP_NAME}}",
    "branding": {
      "useBismillahOption": true,
      "bismillahText": "Bismillah",
      "closingDuaOptional": true
    }
  },
  "sharedText": {
    "primaryCta": "onboardingFlow.sharedText.primaryCta",
    "secondaryCta": "onboardingFlow.sharedText.secondaryCta",
    "skipCta": "onboardingFlow.sharedText.skipCta",
    "backCta": "onboardingFlow.sharedText.backCta",
    "getStartedCta": "onboardingFlow.sharedText.getStartedCta",
    "privacyNote": "onboardingFlow.sharedText.privacyNote"
  },
  "steps": [
    {
      "id": "intro_welcome",
      "type": "welcome",
      "ui": { "lottie": { "asset": "welcome_lottie", "loop": true } },
      "content": {
        "headline": "onboardingFlow.steps.intro_welcome.headline",
        "body": "onboardingFlow.steps.intro_welcome.body",
        "footnote": "onboardingFlow.steps.intro_welcome.footnote",
        "primaryCta": "onboardingFlow.steps.intro_welcome.primaryCta"
      }
    },
    {
      "id": "prayer_knowledge",
      "type": "single_choice",
      "content": {
        "headline": "onboardingFlow.steps.prayer_knowledge.headline",
        "body": "onboardingFlow.steps.prayer_knowledge.body",
        "options": [
          {
            "id": "yes_i_know",
            "label": "onboardingFlow.steps.prayer_knowledge.options.yes_i_know.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.prayer_knowledge.options.yes_i_know.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.prayer_knowledge.options.yes_i_know.feedbackBody"
            }
          },
          {
            "id": "im_learning",
            "label": "onboardingFlow.steps.prayer_knowledge.options.im_learning.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.prayer_knowledge.options.im_learning.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.prayer_knowledge.options.im_learning.feedbackBody"
            }
          },
          {
            "id": "no_not_yet",
            "label": "onboardingFlow.steps.prayer_knowledge.options.no_not_yet.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.prayer_knowledge.options.no_not_yet.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.prayer_knowledge.options.no_not_yet.feedbackBody"
            }
          }
        ]
      }
    },
    {
      "id": "support_needed",
      "type": "single_choice",
      "content": {
        "headline": "onboardingFlow.steps.support_needed.headline",
        "body": "onboardingFlow.steps.support_needed.body",
        "options": [
          {
            "id": "yes_i_need_support",
            "label": "onboardingFlow.steps.support_needed.options.yes_i_need_support.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.support_needed.options.yes_i_need_support.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.support_needed.options.yes_i_need_support.feedbackBody",
              "action": { "type": "open_modal", "modalId": "friends_motivation_modal" }
            }
          },
          {
            "id": "some_support",
            "label": "onboardingFlow.steps.support_needed.options.some_support.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.support_needed.options.some_support.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.support_needed.options.some_support.feedbackBody"
            }
          },
          {
            "id": "im_good",
            "label": "onboardingFlow.steps.support_needed.options.im_good.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.support_needed.options.im_good.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.support_needed.options.im_good.feedbackBody"
            }
          }
        ]
      }
    },
    {
      "id": "learn_islam",
      "type": "single_choice",
      "content": {
        "headline": "onboardingFlow.steps.learn_islam.headline",
        "body": "onboardingFlow.steps.learn_islam.body",
        "options": [
          {
            "id": "quran_surahs",
            "label": "onboardingFlow.steps.learn_islam.options.quran_surahs.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.learn_islam.options.quran_surahs.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.learn_islam.options.quran_surahs.feedbackBody"
            }
          },
          {
            "id": "basics",
            "label": "onboardingFlow.steps.learn_islam.options.basics.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.learn_islam.options.basics.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.learn_islam.options.basics.feedbackBody"
            }
          },
          {
            "id": "im_good",
            "label": "onboardingFlow.steps.learn_islam.options.im_good.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.learn_islam.options.im_good.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.learn_islam.options.im_good.feedbackBody"
            }
          }
        ]
      }
    },
    {
      "id": "why_here",
      "type": "multi_choice",
      "content": {
        "headline": "onboardingFlow.steps.why_here.headline",
        "body": "onboardingFlow.steps.why_here.body",
        "minSelections": 1,
        "maxSelections": 4,
        "options": [
          {
            "id": "pray_5_times",
            "label": "onboardingFlow.steps.why_here.options.pray_5_times.label",
            "onSelect": {
              "feedback": "onboardingFlow.steps.why_here.options.pray_5_times.feedback"
            }
          },
          {
            "id": "track_progress",
            "label": "onboardingFlow.steps.why_here.options.track_progress.label",
            "onSelect": {
              "feedback": "onboardingFlow.steps.why_here.options.track_progress.feedback"
            }
          },
          {
            "id": "learn_how_to_pray",
            "label": "onboardingFlow.steps.why_here.options.learn_how_to_pray.label",
            "onSelect": {
              "feedback": "onboardingFlow.steps.why_here.options.learn_how_to_pray.feedback"
            }
          },
          {
            "id": "just_checking",
            "label": "onboardingFlow.steps.why_here.options.just_checking.label",
            "onSelect": {
              "feedback": "onboardingFlow.steps.why_here.options.just_checking.feedback"
            }
          }
        ]
      }
    },
    {
      "id": "attribution",
      "type": "single_choice",
      "analytics": {
        "eventName": "onboarding_attribution_selected",
        "properties": {
          "selectedOptionId": "{{selectedOptionId}}",
          "selectedOptionLabel": "{{selectedOptionLabel}}"
        }
      },
      "content": {
        "headline": "onboardingFlow.steps.attribution.headline",
        "body": "onboardingFlow.steps.attribution.body",
        "options": [
          {
            "id": "friend_family",
            "label": "onboardingFlow.steps.attribution.options.friend_family.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.friend_family.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.friend_family.feedbackBody"
            }
          },
          {
            "id": "social_media",
            "label": "onboardingFlow.steps.attribution.options.social_media.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.social_media.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.social_media.feedbackBody"
            }
          },
          {
            "id": "app_store_search",
            "label": "onboardingFlow.steps.attribution.options.app_store_search.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.app_store_search.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.app_store_search.feedbackBody"
            }
          },
          {
            "id": "masjid_community",
            "label": "onboardingFlow.steps.attribution.options.masjid_community.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.masjid_community.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.masjid_community.feedbackBody"
            }
          },
          {
            "id": "online_article",
            "label": "onboardingFlow.steps.attribution.options.online_article.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.online_article.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.online_article.feedbackBody"
            }
          },
          {
            "id": "other",
            "label": "onboardingFlow.steps.attribution.options.other.label",
            "onSelect": {
              "feedbackTitle": "onboardingFlow.steps.attribution.options.other.feedbackTitle",
              "feedbackBody": "onboardingFlow.steps.attribution.options.other.feedbackBody"
            },
            "action": {
              "type": "optional_text_input",
              "field": {
                "id": "attribution_other_text",
                "label": "onboardingFlow.steps.attribution.options.other.field.label",
                "placeholder": "onboardingFlow.steps.attribution.options.other.field.placeholder",
                "maxLength": 80
              }
            }
          }
        ],
        "footerNote": "onboardingFlow.sharedText.privacyNote"
      }
    },
    {
      "id": "location_permission",
      "type": "permission",
      "permissionKey": "location",
      "ui": { "illustration": "location" },
      "content": {
        "headline": "onboardingFlow.steps.location_permission.headline",
        "body": "onboardingFlow.steps.location_permission.body",
        "benefits": [
          "onboardingFlow.steps.location_permission.benefits.accurate_prayer_times",
          "onboardingFlow.steps.location_permission.benefits.qibla_direction",
          "onboardingFlow.steps.location_permission.benefits.automatic_timezone"
        ],
        "primaryCta": "onboardingFlow.steps.location_permission.primaryCta",
        "onAllow": {
          "feedbackTitle": "onboardingFlow.steps.location_permission.onAllow.feedbackTitle",
          "feedbackBody": "onboardingFlow.steps.location_permission.onAllow.feedbackBody"
        },
        "onDeny": {
          "feedbackTitle": "onboardingFlow.steps.location_permission.onDeny.feedbackTitle",
          "feedbackBody": "onboardingFlow.steps.location_permission.onDeny.feedbackBody"
        }
      }
    },
    {
      "id": "notification_permission",
      "type": "permission",
      "permissionKey": "notifications",
      "ui": { "illustration": "cat_playing" },
      "content": {
        "headline": "onboardingFlow.steps.notification_permission.headline",
        "body": "onboardingFlow.steps.notification_permission.body",
        "benefits": [
          "onboardingFlow.steps.notification_permission.benefits.prayer_reminders",
          "onboardingFlow.steps.notification_permission.benefits.quiet_hours",
          "onboardingFlow.steps.notification_permission.benefits.streaks"
        ],
        "primaryCta": "onboardingFlow.steps.notification_permission.primaryCta",
        "onAllow": {
          "feedbackTitle": "onboardingFlow.steps.notification_permission.onAllow.feedbackTitle",
          "feedbackBody": "onboardingFlow.steps.notification_permission.onAllow.feedbackBody"
        },
        "onDeny": {
          "feedbackTitle": "onboardingFlow.steps.notification_permission.onDeny.feedbackTitle",
          "feedbackBody": "onboardingFlow.steps.notification_permission.onDeny.feedbackBody"
        }
      }
    },
    {
      "id": "all_set",
      "type": "final",
      "ui": { "lottie": { "asset": "confetti", "loop": false } },
      "content": {
        "headline": "onboardingFlow.steps.all_set.headline",
        "body": "onboardingFlow.steps.all_set.body",
        "socialProof": {
          "text": "onboardingFlow.steps.all_set.socialProof.text",
          "note": "onboardingFlow.steps.all_set.socialProof.note"
        },
        "primaryCta": "onboardingFlow.steps.all_set.primaryCta"
      }
    },
    {
      "id": "splash",
      "type": "splash",
      "durationMs": 1400,
      "ui": { "background": "brandGradient", "logo": "appLogo" },
      "content": {
        "headline": "onboardingFlow.steps.splash.headline",
        "subheadline": "onboardingFlow.steps.splash.subheadline",
        "optionalBadge": "onboardingFlow.steps.splash.optionalBadge"
      }
    }
  ],
  "modals": [
    {
      "id": "friends_motivation_modal",
      "type": "info",
      "content": {
        "headline": "onboardingFlow.modals.friends_motivation_modal.headline",
        "body": "onboardingFlow.modals.friends_motivation_modal.body",
        "bullets": [
          "onboardingFlow.modals.friends_motivation_modal.bullets.add_trusted_friends",
          "onboardingFlow.modals.friends_motivation_modal.bullets.private_encouragement",
          "onboardingFlow.modals.friends_motivation_modal.bullets.shared_goals"
        ],
        "primaryCta": "onboardingFlow.modals.friends_motivation_modal.primaryCta"
      }
    }
  ]
}
